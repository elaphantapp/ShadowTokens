npm run deploy

> deploy@1.0.0 deploy /Users/zhouhe/blockchain/poanetwork/tokenbridge-contracts/deploy
> if test "$NOFLAT" != "true" ; then cd ..; npm run flatten; cd deploy; fi && node deploy.js


> tokenbridge-contracts@5.4.1 flatten /Users/zhouhe/blockchain/poanetwork/tokenbridge-contracts
> bash flatten.sh

Flattening common bridge contracts
Flattening bridge validators contracts
Flattening contracts related to native-to-erc bridge
Flattening contracts related to erc-to-erc bridge
Flattening contracts related to erc-to-native bridge
Flattening contracts related to arbitrary-message bridge
Flattening contracts related to erc677 to erc677 on top of AMB bridge
Flattening contracts related to stake token mediators
Flattening contracts related to native-to-erc on top of AMB bridge
Flattening contracts related to erc-to-native on top of AMB bridge
Flattening contracts related to multi-erc-to-erc on top of AMB bridge
Bridge mode: AMB_ERC_TO_ERC

[Home] Deploying Bridge Mediator storage

pending txHash 0x8028c18a7f612940e600eac942a7fa9a96d8dfa9311ffc55338269ed137d7178
It was not possible to verify 0x5b0d153ed6404a02c885ebe864c21c22996e289d in blockscout
[Home] Bridge Mediator Storage:  0x5b0d153ED6404a02C885EBE864C21C22996e289D

[Home] Deploying Bridge Mediator implementation

pending txHash 0x392b9991d3591153ea0da3ae54c2f185453cc199fc1b9caea5e2a259a86f575a
It was not possible to verify 0x93f57dc835c93957111f5a69a585742d0e2dc43f in blockscout
[Home] Bridge Mediator Implementation:  0x93f57dc835C93957111f5A69A585742D0E2Dc43F

[Home] Hooking up Mediator storage to Mediator implementation
sendRawTxHome ===> 
pending txHash 0xae55e7df624079ecd2d93894cfb5af7ad895588db04502ede7a920873e3b3f5e

[Home] deploying Bridgeable token
pending txHash 0xd4ea5ff4df025474beae9aa2d2bfc21b9fdeb64c8badb39fe8d9dc4009ee0541
It was not possible to verify 0xee7faf1227afb0668f339a849dcf01648f41671f in blockscout
[Home] Bridgeable Token:  0xeE7fAf1227aFb0668f339A849dcf01648f41671f

[Home] Set Bridge Mediator contract on Bridgeable token
sendRawTxHome ===> 
pending txHash 0x1dc32f02aaa9be7a8605da7fdfd7fda1ebfec517a2717fb46e8399a79945d6ad
[Home] Transferring ownership of Bridgeable token to Bridge Mediator contract
sendRawTxHome ===> 
pending txHash 0xf35e9f96b4dbf41f735d3ffed43eb6881f90f2aa831d733489915ca5b2c15b6f

Home part of ERC677-to-ERC677 bridge deployed


[Foreign] Deploying Bridge Mediator storage

pending txHash 0xf4982d96d359731ac2c83bda44975798b28357c6bff0928fa68417592af8b0a4
It was not possible to verify 0x67fe43fadf03ac43c48b9743ba691cc40839132e in etherscan
[Foreign] Bridge Mediator Storage:  0x67Fe43faDf03aC43C48B9743Ba691Cc40839132e

[Foreign] Deploying Bridge Mediator implementation

pending txHash 0xbac338731353b62b5be80bda3127bf68ce7a0e146a10935462300e8d60629772
It was not possible to verify 0xe0edb339156d4825a58e0e783f284fe275cb05e9 in etherscan
[Foreign] Bridge Mediator Implementation:  0xE0EDb339156d4825a58e0e783f284FE275cb05E9

[Foreign] Hooking up Mediator storage to Mediator implementation
pending txHash 0xefa681b41c730ce8e20c6b9fad2e6db0eaa56a20fb8bef5c20992285f74abd4b

Foreign part of ERC677-to-ERC677 bridge deployed


[Home] Initializing Bridge Mediator with following parameters:


    AMB contract: 0x475A7C9B943F278A1b45287d600D39A186c19698, 
    Mediator contract: 0x67Fe43faDf03aC43C48B9743Ba691Cc40839132e, 
    Token contract: 0xeE7fAf1227aFb0668f339A849dcf01648f41671f,
    DAILY_LIMIT : 30000000000000000000000000 which is 30000000 in eth,
    MAX_AMOUNT_PER_TX: 1500000000000000000000000 which is 1500000 in eth,
    MIN_AMOUNT_PER_TX: 500000000000000000 which is 0.5 in eth,
    EXECUTION_DAILY_LIMIT : 15000000000000000000000000 which is 15000000 in eth,
    EXECUTION_MAX_AMOUNT_PER_TX: 750000000000000000000000 which is 750000 in eth,
    FOREIGN_TO_HOME_DECIMAL_SHIFT: 0,
    MEDIATOR_REQUEST_GAS_LIMIT : 8000000, 
    OWNER: 0xcdbb781AC508B19c126646E9aEDF1475144c0262
  
sendRawTxHome ===> 
pending txHash 0x3e8e3cb5a95542e3ed5c05da990802f35c5df4e04255b285afcebafb222e70d1
Transferring bridge mediator proxy ownership to upgradeability admin
sendRawTxHome ===> 
pending txHash 0x3d343e9d682de23fcc2ea8770feb52da1ee999b7132f4ee556e50b1609b09a09

[Foreign] Initializing Bridge Mediator with following parameters:


    AMB contract: 0x4c118b3EA2371277273B2058f6e8FBC92eD96ADB, 
    Mediator contract: 0x5b0d153ED6404a02C885EBE864C21C22996e289D, 
    Token contract: 0x41c16473b12211892c813f52815f700440471aa0,
    DAILY_LIMIT : 15000000000000000000000000 which is 15000000 in eth,
    MAX_AMOUNT_PER_TX: 750000000000000000000000 which is 750000 in eth,
    MIN_AMOUNT_PER_TX: 500000000000000000 which is 0.5 in eth,
    EXECUTION_DAILY_LIMIT : 30000000000000000000000000 which is 30000000 in eth,
    EXECUTION_MAX_AMOUNT_PER_TX: 1500000000000000000000000 which is 1500000 in eth,
    FOREIGN_TO_HOME_DECIMAL_SHIFT: 0,
    MEDIATOR_REQUEST_GAS_LIMIT : 8000000, 
    OWNER: 0xcdbb781AC508B19c126646E9aEDF1475144c0262
  
pending txHash 0x7ec1736616b33d06e1fb19a58f91cda7ddee7e8aceb1a271601c61c99144cb88
Transferring bridge mediator proxy ownership to upgradeability admin
pending txHash 0x1d248f3d55cbc4e672d9297e05cace78a95291e654c89b5eb5bf5d3acf49c6b7

Deployment has been completed.


[   Home  ] Bridge Mediator: 0x5b0d153ED6404a02C885EBE864C21C22996e289D
[   Home  ] ERC677 Bridgeable Token: 0xeE7fAf1227aFb0668f339A849dcf01648f41671f
[ Foreign ] Bridge Mediator: 0x67Fe43faDf03aC43C48B9743Ba691Cc40839132e
[ Foreign ] ERC677 Token: 0x41c16473b12211892c813f52815f700440471aa0
Contracts Deployment have been saved to `bridgeDeploymentResults.json`